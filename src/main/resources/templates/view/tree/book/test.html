<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>User Registration Form</title>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Get the form element
      var form = document.getElementById('user-form');

      // Add an event listener for form submission
      form.addEventListener('submit', function(event) {
        // Check if the form is valid
        if (!form.checkValidity()) {
          // Prevent form submission if invalid
          event.preventDefault();
          event.stopPropagation();

          // Display custom error messages
          displayCustomErrors();
        }
      });
    });

    function displayCustomErrors() {
      var errorContainer = document.getElementById('error-messages');
      errorContainer.innerHTML = '';

      var username = document.getElementById('username').value;
      var email = document.getElementById('email').value;
      var password = document.getElementById('password').value;

      var errors = [];
      if (username === '') {
        errors.push('Username is required.');
      }
      if (email === '') {
        errors.push('Email is required.');
      } else if (!validateEmail(email)) {
        errors.push('Email is invalid.');
      }
      if (password === '') {
        errors.push('Password is required.');
      }

      if (errors.length > 0) {
        errors.forEach(function(error) {
          var errorItem = document.createElement('li');
          errorItem.textContent = error;
          errorContainer.appendChild(errorItem);
        });
      }
    }

    function validateEmail(email) {
      var re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }
  </script>
</head>
<body>

<h2>User Registration</h2>

<form id="user-form" action="/submit-form" method="post">
  <div>
    <label for="username">Username:</label>
    <input type="text" id="username" name="username" required />
  </div>
  <div>
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required />
  </div>
  <div>
    <label for="password">Password:</label>
    <input type="password" id="password" name="password" required />
  </div>
  <div id="error-messages" style="color: red;">
    <!-- Error messages will be displayed here -->
  </div>
  <div>
    <button type="submit">Register</button>
  </div>
</form>

</body>
</html>
