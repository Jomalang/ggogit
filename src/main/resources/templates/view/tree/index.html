<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <link th:href="@{/css/fragments.css}" rel="stylesheet"/>
    <link th:href="@{/css/layout.css}" rel="stylesheet"/>
    <title>Document</title>
</head>
<body>
<header>
    <h1 class="none">사용자 트리 세부정보</h1>
    <section th:replace="~{fragments/background :: user-info-back-header
        (src='javascript:history.back()',
        backimgpath='user-tree-index-user-background-img.svg',
        userimg=${memberImageView.profileImage},
        username=${memberImageView.nickName},
        userid=${memberImageView.userName},
        userurl='#')}">
        <h2 class="none">브랜치 검색</h2>
        <!-- 컴포넌트 -->
        <div></div>
    </section>
</header>
<main>
    <section class="user-tree-info__container">
        <h2 class="none">트리 정보</h2>
        <div th:replace="~{fragments/card :: card-tree-info-cover(src=${treeInfoView.coverImageName},treetitle=${treeInfoView.title},booktitle=${treeInfoView.bookTitle})}">
        </div>
    </section>
    <section class="branch-tree-detail-container"
             th:with="rPage=${treeInfoView.readingPage ?: 0}, totalPage=${treeInfoView.bookTotalPage ?: 1}">
        <h2 class="none">트리 상세 설명</h2>
        <div th:replace="~{fragments/card :: card-hidden-info(
        hiddentext='자세히',
        authors=${treeInfoView.bookAuthor},
        translators=${treeInfoView.bookTranslator},
        publisher=${treeInfoView.bookPublisher},
        page=${totalPage},
        seed=${treeInfoView.seedId},
        treedescription=${treeInfoView.description},
        readpage=${rPage},
        progress=${#numbers.formatDecimal((rPage * 100.0 / totalPage), 1, 1)},
        fullpage=${treeInfoView.bookTotalPage},
        leaf=${treeInfoView.treeLeafCnt},
        like=${treeInfoView.treeLikeCnt},
        view=${treeInfoView.treeViewCnt}
    )}"></div>
    </section>
<!--    트리 댓글 없음-->
<!--    <section class="tree-index-comment-container">-->
<!--        <h1 class="none">댓글</h1>-->
<!--        <div th:replace="~{fragments/bar :: comment(profileImg=@{/svg/comment-profile.svg}, commentCount='199')}"></div>-->

<!--        <section id="comment-filter-tab-id"-->
<!--                 class="book-detail-comment-tab-container book-detail-comment-tab-container&#45;&#45;active">-->
<!--            <h1 class="none">댓글 탭</h1>-->
<!--            <div th:replace="~{fragments/tab-comment :: tab-comment}"></div>-->
<!--        </section>-->
<!--    </section>-->

    <section class="branch-list__container">
        <h2 th:replace="~{fragments/text :: text-main-title(title='브랜치 목록', size=24)}"></h2>
        <!-- 컴포넌트 -->
        <section class="branch-filter-container">
            <h3 class="none">브랜치 필터</h3>
            <!-- 컴포넌트 -->
            <div th:replace="~{fragments/filter :: filter-seed-text-btns(bookmark='책갈피',seed1='씨앗',seed2='씨앗')}"></div>
        </section>

        <section class="branch-filter-search__container">
            <h3 class="none">브랜치 검색 결과</h3>
            <!-- 컴포넌트 -->
            <div th:replace="~{fragments/bar :: bar-search-result(result=${#lists.size(leafList)})}"></div>
        </section>
        <section class="branch-filter-result-list__container">
            <h3 class="none">브랜치 리스트</h3>
            <!-- 컴포넌트 -->
            <div th:replace="~{fragments/card :: card-branch__list(${leafList})}"></div>
        </section>
    </section>
</main>

<section class="nav-back-container">
    <h2 class="none">네비바 뒤 공백</h2>
</section>
<aside>
    <section class="nav-container">
        <h2 class="none">네비게이션</h2>
        <!-- 트리 생성 언더바  -->
        <div th:replace="~{fragments/nav :: navigation-bar(active='home')}"></div>
    </section>
</aside>


<script>
    function commentTabActive() {
        const commentTab = document.getElementById("comment-filter-tab-id");

        commentTab.classList.add("book-detail-comment-tab-container--active");

        document.body.classList.add("no-scroll");
        window.scrollTo({top: 0, behavior: "smooth"});
    }

    function commentTabInactive() {
        const commentTab = document.getElementById("comment-filter-tab-id");

        commentTab.classList.remove("book-detail-comment-tab-container--active");
        document.body.classList.remove("no-scroll");
    }

    document.getElementById("bar-comment-id").addEventListener("click", commentTabActive);
    document.getElementById("top-bar-comment__back-icon-box-id").addEventListener("click", commentTabInactive);
    document.getElementById("bg-book-detail-box-id").addEventListener("click", commentTabInactive);
</script>

<script>
    document.getElementById("input-comment-input__input-id").addEventListener("focus", function () {
        const submitBtn = document.getElementById("input-comment-input__submit-id");
        setTimeout(() => {
            submitBtn.classList.add("input-comment-input__submit--active")
        }, 100);
    });

    document.getElementById("input-comment-input__input-id").addEventListener("focusout", function () {
        const submitBtn = document.getElementById("input-comment-input__submit-id");
        submitBtn.classList.remove("input-comment-input__submit--active");
    });
</script>
</body>
</html>
